<style>
.secao1{
    display: flex;
    height: 75vh;
    width: 100%;
    background-color: #F2F2F2;
    border-radius: 6px;
    align-items: center;
}

.secao1-1{
    display: flex;
    flex-wrap: wrap;
    align-content: baseline;
    width: calc(35% - 20px);
    margin: 5px;
    padding: 5px;
    /*border: solid 1px rgba(0,0,0,0.3);*/
    border-radius: 4px;
    overflow-y: scroll;
    overflow-x: hidden;
    height: calc(75vh - 20px);
    /*background-color: white;*/
    scrollbar-width: 4px;          /* "auto" or "thin" */
    scrollbar-color: rgba(0,0,0,0.3) rgba(0,0,0,0.05);
}
.secao1-1::-webkit-scrollbar{
    width: 4px !important;
}
.secao1-1::-webkit-scrollbar-track {
  background: rgba(0,0,0,0.05);
}
.secao1-1::-webkit-scrollbar-thumb {
  background-color: rgba(0,0,0,0.3);
  border-radius: 0px !important;
  border: none !important;
}
.secao1-2{
    display: flex;
    width: calc(65% - 20px);
    padding: 10px;
}

.secao1-div-1-codigo{
    display: flex;
    width: 100%;
    padding: 6px 10px;
    background-color: black;
    border-radius: 2px;
    margin-top: 10px;
    justify-content: space-between;
}
.secao1-div-1-codigo:first-child{
    margin-top: 0px;
}
.secao1-div-1-codigo p{
    margin: 0px;
    color: white;
}
.nav-icones{
    display: flex;
    align-items: center;
    gap: 5px;
}
.secao1-div-1-codigo .icones{
    color: white;
    font-size: 16px;
    cursor: pointer;
}

#text-var-html{
    height: 26vh; 
    width: 100%; 
    border: solid 1px black;
    border-radius: 4px; 
    color:black;
    resize: vertical;
}
#text-var-css{
    height: 26vh; 
    width: 100%;
    border: solid 1px black;
    border-radius: 4px; 
    color:black;
    resize: vertical;
}
#text-var-js{
    height: 26vh; 
    width: 100%;
    border: solid 1px black;
    border-radius: 4px; 
    color:black;
    resize: vertical;
}
#text-preview{
    width: 100%;
    max-width: 100vw !important;
    height: calc(75vh - 20px);
    max-height: 100vh !important;
    border: solid 1px rgba(0,0,0,0.3);
    border-radius: 4px;
    overflow-y: scroll;
    background-color: #F2F2F2; 
}
#aumentartelapreview{
    margin-left: -20px;
    width: 20px;
    height: 20px;
    z-index: 99999;
    background-color: black;
    color: white;
    text-align: center;
    cursor: pointer;
    font-size: 20px;
    border-radius: 4px;
}

/*mobile*/
@media (max-width: 768px) {
    .secao1 {
        flex-wrap: wrap;
    }
    .secao1-1{
        height: 37vh;
        width: 100%;
    }
    .secao1-2{
        height: 37vh;
        width: 100%;
    }
    #text-preview{
        height: calc(38vh - 40px);
    }
}

/*mensagens de aviso na tela*/
.notification {
    position: fixed;
    z-index: 20;
    top: 10%;
    left: 50%;
    transform: translate(-50%, 10%);
    background-color: black;
    color: #fff;
    padding: 5px 15px;
    border-radius: 5px;
    opacity: 0;
    transition: opacity 0.3s ease-in-out;
  }
  
  .notification.show {
    opacity: 1;
  }
</style>

<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

<section class="secao1">
                    
    <div class="secao1-1">
        <div class="secao1-div-1-codigo">
            <p>Digite aqui seu HTML</p>
            <div class="nav-icones">
                <span title="copiar" id="copy-text-var-html" onclick="fcopiar()" class="material-symbols-outlined icones">content_copy</span>
                <span id="format-text-var-html" title="formatar" onclick="fformatar()" class="material-symbols-outlined icones">reorder</span>
                <span id="telahtml" title="minimizar" onclick="ftela()" class="material-symbols-outlined icones">remove</span>
            </div>
        </div>
        <div id='text-var-html' placeholder="Seu HTML"></div>
        <div class="secao1-div-1-codigo">
            <p>Digite aqui seu CSS</p>
            <div class="nav-icones">
                <span title="copiar" id="copy-text-var-css" onclick="fcopiar()" class="material-symbols-outlined icones">content_copy</span>
                <span id="format-text-var-css" title="formatar" onclick="fformatar()" class="material-symbols-outlined icones">reorder</span>
                <span id="telacss" title="minimizar" onclick="ftela()" class="material-symbols-outlined icones">remove</span>
            </div>
        </div>
        <div id='text-var-css' placeholder="Seu CSS"></div>
        <div class="secao1-div-1-codigo">
            <p>Digite aqui seu JS</p>
            <div class="nav-icones">
                <span title="copiar" id="copy-text-var-js" onclick="fcopiar()" class="material-symbols-outlined icones">content_copy</span>
                <span id="format-text-var-js" title="formatar" onclick="fformatar()" class="material-symbols-outlined icones">reorder</span>
                <span id="telajs" title="minimizar" onclick="ftela()" class="material-symbols-outlined icones">remove</span>
            </div>
        </div>
        <div id='text-var-js' placeholder="Seu JS"></div>
    </div>

    <div class="secao1-2">
        <iframe title="preview-do-codigo" srcdoc='<p>Resultado Aqui...</p>' id='text-preview' allow="accelerometer; camera; encrypted-media; display-capture; geolocation; gyroscope; microphone; midi; clipboard-read; clipboard-write" allowfullscreen="true" allowtransparency="true" sandbox="allow-modals allow-pointer-lock allow-popups allow-scripts allow-top-navigation-by-user-activation allow-downloads allow-presentation" referrerpolicy="no-referrer"></iframe>
        <div id="aumentartelapreview" title="tela inteira" onclick="previewtelainteira ()" class="material-symbols-outlined">add</div>
    </div>

</section>

<script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.14.7/beautify.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.14.7/beautify-css.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.14.7/beautify-html.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.5/ace.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.5/ext-language_tools.js"></script>

<script>
ace.require("ace/ext/language_tools");
const editorhtml = ace.edit("text-var-html");
editorhtml.setTheme("ace/theme/textmate");
editorhtml.session.setMode("ace/mode/html");

const editorcss = ace.edit("text-var-css");
editorcss.setTheme("ace/theme/textmate");
editorcss.session.setMode("ace/mode/css");

const editorjs = ace.edit("text-var-js");
editorjs.setTheme("ace/theme/textmate");
editorjs.session.setMode("ace/mode/javascript");

// enable autocompletion and snippets
editorhtml.setOptions({
    enableBasicAutocompletion: true,
    enableSnippets: true,
    enableLiveAutocompletion: true,
    wrap: true
});
editorcss.setOptions({
    enableBasicAutocompletion: true,
    enableSnippets: true,
    enableLiveAutocompletion: true,
    wrap: true
});
editorjs.setOptions({
    enableBasicAutocompletion: true,
    enableSnippets: true,
    enableLiveAutocompletion: true,
    wrap: true
});

//variaveis que captura o que foi escrito
let vartexthtml = editorhtml.getValue();
let vartextcss = editorcss.getValue();
let vartextjs = editorjs.getValue();
//variaveis para mostrar o código
let mostrartext = document.getElementById("text-preview");

//função rodar o código
function rodar(){
    vartexthtml = editorhtml.getValue();
    vartextcss = editorcss.getValue();
    vartextjs = editorjs.getValue();

    mostrartext.srcdoc = vartexthtml + '<style>'+vartextcss+'</style>' + '<script>'+vartextjs+'<\/script>';

}

//função baixar o código
function baixar(){

    vartexthtml = editorhtml.getValue();
    vartextcss = editorcss.getValue();
    vartextjs = editorjs.getValue();

    mostrartext = '<style>'+vartextcss.toString() +'</style>' + vartexthtml.toString() + '<script>'+vartextjs.toString()+'<\/script>';
    
    let htmlblob= new Blob([mostrartext], {type : 'text/html'});
    const link= window.document.createElement('a');
    link.href = window.URL.createObjectURL(htmlblob);
    link.download = 'index.html';
    link.click();
    window.URL.revokeObjectURL(link.href);
}

//copiar codigo
function fcopiar(){
    const elementoClicado = event.target;

    if(elementoClicado.id == "copy-text-var-html"){
        if(editorhtml.getSelectedText() == ""){
            navigator.clipboard.writeText(editorhtml.getValue());
        }else{
            navigator.clipboard.writeText(editorhtml.getSelectedText());
        }
    }

    if(elementoClicado.id == "copy-text-var-css"){
        if(editorcss.getSelectedText() == ""){
            navigator.clipboard.writeText(editorcss.getValue());
        }else{
            navigator.clipboard.writeText(editorcss.getSelectedText());
        }
    }

    if(elementoClicado.id == "copy-text-var-js"){
        if(editorjs.getSelectedText() == ""){
            navigator.clipboard.writeText(editorjs.getValue());
        }else{
            navigator.clipboard.writeText(editorjs.getSelectedText());
        }
    }

    const notification = document.createElement('div');
    notification.classList.add('notification');
    notification.innerText = 'código copiado';
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.classList.add('show');
        setTimeout(() => {
        notification.classList.remove('show');
        setTimeout(() => {
            document.body.removeChild(notification);
        }, 300);
        }, 2000);
    }, 100);
    
}

//formatar codigo
function fformatar(){
    const elementoClicado = event.target;
    const options = { indent_size: 4, space_in_empty_paren: true }

    if(elementoClicado.id == "format-text-var-html"){
        editorhtml.setValue(html_beautify(editorhtml.getValue(), options));
    }
    if(elementoClicado.id == "format-text-var-css"){
        editorcss.setValue(css_beautify(editorcss.getValue(), options));
    }
    if(elementoClicado.id == "format-text-var-js"){
        editorjs.setValue(js_beautify(editorjs.getValue(), options));
    }
}

//minimizar tela de edicao
let telahtml = document.getElementById("text-var-html");
let telacss = document.getElementById("text-var-css");
let telajs = document.getElementById("text-var-js");

function ftela(){
    const elementoClicado = event.target;

    if (elementoClicado.id == "telahtml"){
        if (telahtml.style.display != "none"){
            telahtml.style.display = "none";
            elementoClicado.textContent = 'add';
        }else{
            telahtml.style.display = "block";
            elementoClicado.textContent = 'remove';
        }
    }

    if (elementoClicado.id == "telacss"){
        if (telacss.style.display != "none"){
            telacss.style.display = "none";
            elementoClicado.textContent = 'add';
        }else{
            telacss.style.display = "block";
            elementoClicado.textContent = 'remove';
        }
    }

    if (elementoClicado.id == "telajs"){
        if (telajs.style.display != "none"){
            telajs.style.display = "none";
            elementoClicado.textContent = 'add';
        }else{
            telajs.style.display = "block";
            elementoClicado.textContent = 'remove';
        }
    }
  
};

//redimensionar tela editores
const resizeObserverHTML = new ResizeObserver(entries => {
    for (let entry of entries) {
      editorhtml.resize();
    }
});
resizeObserverHTML.observe(telahtml);

const resizeObserverCSS = new ResizeObserver(entries => {
    for (let entry of entries) {
      editorcss.resize();
    }
});
resizeObserverCSS.observe(telacss);

const resizeObserverJS = new ResizeObserver(entries => {
    for (let entry of entries) {
      editorjs.resize();
    }
});
resizeObserverJS.observe(telajs);

//aumentar iframe
//variaveis para aumentar/diminuir tela
let aumentartelapreview = document.getElementById("aumentartelapreview");

function previewtelainteira (){

    if( mostrartext.style.position == "fixed" ){
        mostrartext.style.position = "";
        mostrartext.style.width = "";
        mostrartext.style.height = "";
        aumentartelapreview.style.position = "";
    }else{
        mostrartext.style.position = "fixed";
        mostrartext.style.width = "calc(100vw - 2px)";
        mostrartext.style.height = "calc(100vh - 2px)";
        mostrartext.style.left = "0px";
        mostrartext.style.top = "0px";
        mostrartext.style.zIndex = "99999";
        aumentartelapreview.style.position = "fixed";
        aumentartelapreview.style.right = "0px";
        aumentartelapreview.style.top = "0px";
    }
    
};
</script>